<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  引子
  #

前一阵子，团队做了一套AB测试的通用解决方案。在这里，不想聊具体怎么实现的。反而想聊一下怎样才是正确AB测试。因为在内部推广的时候，发现大家对AB测还是不明白。

不明白为什么要AB测试
不明白如何做AB测试
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="/posts/ab-testing/">
  <meta property="og:site_name" content="一哥黑板报">
  <meta property="og:title" content="也谈AB测试">
  <meta property="og:description" content="引子 # 前一阵子，团队做了一套AB测试的通用解决方案。在这里，不想聊具体怎么实现的。反而想聊一下怎样才是正确AB测试。因为在内部推广的时候，发现大家对AB测还是不明白。
不明白为什么要AB测试 不明白如何做AB测试">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-12-25T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-17T10:55:20+08:00">
    <meta property="article:tag" content="Testing">
<title>也谈AB测试 | 一哥黑板报</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="/posts/ab-testing/">
<link rel="stylesheet" href="/book.min.e47103a2785905b5db8438d6a609c05371af6c90eabdc369de60b296f8bba830.css" >
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.1b54163ba33699d30ae95ade6aca3c1aab77db8407ee0eb2bed501765f3a8acb.js" ></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" ></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.jpeg" alt="Logo" class="book-icon" /><span>一哥黑板报</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>























  
<ul>
  
  <li>
    <a href="/posts/"  >
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/RyanPoy/"  target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>也谈AB测试</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#引子">引子</a></li>
        <li><a href="#聊聊现实">聊聊现实</a></li>
        <li><a href="#对照实验">对照实验</a></li>
        <li><a href="#结论">结论</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    也谈AB测试
  </h1>
  
  <div class="flex align-center text-small book-post-date">
    <img src="/svg/calendar.svg" class="book-icon " alt="" />
    <span>December 25, 2020</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/Tech/">Tech</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/Testing/">Testing</a>
  </div>
  


  <div class="book-post-content"><h2 id="引子">
  引子
  <a class="anchor" href="#%e5%bc%95%e5%ad%90">#</a>
</h2>
<p>前一阵子，团队做了一套AB测试的通用解决方案。在这里，不想聊具体怎么实现的。反而想聊一下怎样才是正确AB测试。因为在内部推广的时候，发现大家对AB测还是不明白。</p>
<ul>
<li>不明白为什么要AB测试</li>
<li>不明白如何做AB测试</li>
</ul>
<h2 id="聊聊现实">
  聊聊现实
  <a class="anchor" href="#%e8%81%8a%e8%81%8a%e7%8e%b0%e5%ae%9e">#</a>
</h2>
<p>现实中，不做AB测试，而是<code>想当然</code>的例子很多。例如：</p>
<ol>
<li>感冒了，吃了感冒药，第2天感冒好了，所以感冒是感冒药治好的</li>
<li>暑假期间，播放产品进行了改版，运营也上了新的播放内容，DAU涨了。但原因说不清楚了。
<ul>
<li>产品说：是播放产品改版的原因</li>
<li>运营说：是因为上了新内容的原因</li>
<li>其他人说：是因为假期来了，自然流量增长</li>
</ul>
</li>
</ol>
<p>现在让我们看看这两个例子。</p>
<p>在例1中：其实还有一部分人吃了感冒药后，第2天感冒并没有好，而是再过几天才好的。也有一部分人没有吃感冒药，第2天感冒也好了。很明显，吃了感冒药第2天好的，只是感冒人群的一部分。所以，不能以偏概全。因此，例1的结论是站不住的。</p>
<p>在例2中：DAU上涨，其实有3个条件共同作用的结果。</p>
<ul>
<li>产品改版</li>
<li>新内容上线</li>
<li>暑假期间</li>
</ul>
<p>但是再仔细想想上面的每一个条件：</p>
<ul>
<li>产品改版就一定是正向的？也许改版后并没有提升用户体验，甚至某些地方反而是降低了用户体验的。</li>
<li>新内容上线就一定是正向的？也许新的内容并不一定适合这段时间的人群特征，也许反而使得用户流失。</li>
<li>暑假期间从理论上讲会使得自然流量上涨。嗯，是的！貌似只有这个能站住脚，但是这个也只是经验之谈。</li>
</ul>
<p>上面的例子，本质上是自认为得到了一个因果结论。但是请注意：每当我们得出一个因果结论的时候，一定要加倍小心，一定要再三的反问自己，这个因果是真正的因果么？我们是不是把一个经验结论当成了一个因果结论？</p>
<p>其实因果关系，需要用一套行之有效的科学方法和科学标准来检验。只有这样，才能确定它是否真正反映了事物的因果关系。而这种科学方法和标准就是<code>对照实验</code></p>
<h2 id="对照实验">
  对照实验
  <a class="anchor" href="#%e5%af%b9%e7%85%a7%e5%ae%9e%e9%aa%8c">#</a>
</h2>
<p>什么是对照实验呢？通俗来说，对照实验就是将实验对象随机分成两个组，一个实验组 (treatment group)，一个对照组 (control group)。对实验组人为地修改某一个控制变量，来实施实验，而对照组仅是用来做对比。通过实验组和对照组的比较，从而退出控制变量和结果之间是否有因果关系。</p>
<p><strong>来看一个<code>正确的</code>对照实验的例子：</strong>
『坏血病』在历史上曾是严重威胁人类健康的一种疾病，尤其在远洋航行的水手中更为严重。在18世纪，一位英国船长发现，在一些地中海国家的海军舰艇上服役的船员没有坏血病。他注意到，这些船员的食物配给中含有柑橘类(citrus)水果。于是，为了弄清真正的原因，这位船长将他的船员们<code>随机</code>分为两组：其中一组在日常饮食中加入酸橙(limes)，而另外一组维持原来的食谱不变。结果通过对比发现，定期食用酸橙的一组船员，真的防止了坏血病的发生。后来，定期食用柑橘类水果就变成了英国水手必须遵循的一种规定。</p>
<p>上述的例子就是一个<code>典型且成功</code>的对照实验。为什么这么说呢？因为船长对于船员进行分组时有一个很关键的细节：是<code>随机</code>分组的。首先，两个组的船员都来自同一艘船，他们平常的生活条件大体相同。如果不是来自同一艘船，就会引入额外的干扰因素，比如船员的航线不同，出身不同，整体健康状况可能也不同，最终导致实验失败。其次，两个组是<code>随机</code>分派的，这样就避免了「选择性偏差」。</p>
<p><strong>再来看一个<code>错误的</code>对照实验的例子：</strong>
产品改版，为判断这个改版是否正确。在上线前，做了AB测试。随机的挑选了一部分男性用户，将其随机分成了两组，分别使用新版本（实验组）和老版本（对照组）。根据一段时间内，用户的使用时长作为判断依据。发现新版本用户使用时长明显高于老版本，所以，得出新版本优于老版本的结论。</p>
<p>上述例子就是一个<code>典型且失败</code>的对照实验。它犯了一个很明显的错误：就是在一开始挑选用户的时候，都为男性。这样，实验对象并不随机，从而得出了错误的因果关系。因为这个结论，其实只能说明：在男性用户中，新版本要优于老版本。</p>
<p><strong>来看另外一个<code>错误的</code>对照实验的例子：</strong>
同样的是产品改版，为判断这个改版是否正确。在上线前，做了AB测试。把全量用户分成了两组，实验组用户数占比10/256，对照组用户数占比246/256。根据一段时间内，两组用户的使用时长作为判断依据，从而得出新版本是否优于老版本的结论。</p>
<blockquote>
<p>上面是我司真实的案例，而且基本上所有产品功能上线前全部都是这样的方式来做对照实验。</p>
<p>为什么分配比例是以256为分母？因为互联网产品经常会为设备（终端）生成一个16进制的设备号。然后设备号的前两位是从00到FF，刚好是256的范围。</p>
<p>为什么是10/256，246/256的分配比例？说实话，10 和 246 是拍脑袋想的，但基本上都遵循一个原则：实验组必须先拿少量来测试。因为这样不会影响整体的数据。</p></blockquote>
<p>这个例子也犯了相同的的错误：就是在一开始挑选用户的时候，不随机，一部分占比10/256，一部分占比246。这样也得出了错误的因果关系。</p>
<p>由上可见，我们设计实验来探索或验证因果律的时候，需要加倍小心。因为实验本身就可能存在陷阱和选择性偏差。</p>
<h2 id="结论">
  结论
  <a class="anchor" href="#%e7%bb%93%e8%ae%ba">#</a>
</h2>
<p>通篇说了这么多，也就是为了来解答本文开始的这两个问题。最后做个总结吧。</p>
<ol>
<li>不明白为什么要AB测试</li>
</ol>
<p><strong>答：</strong> AB测试能够科学的、严谨的得到因果关系。这样的因果关系，才是正确的、合理的，而不是经验性的。所以，需要AB测试。</p>
<ol start="2">
<li>不明白如何做AB测试</li>
</ol>
<p><strong>答：</strong> AB测试的关键在于<code>对照实验</code>。要保证<code>对照实验</code>的<code>正确性</code>，需要严格遵守下面的规则：</p>
<ol>
<li>要对足够随机的挑选实验对象</li>
<li>要把实验对象分成两组：<code>实验组</code> 和 <code>对照组</code></li>
<li>实验过程中，只能改变一个因素，从而得出一个因素带来的结果。因为如果改变了多个因素，结果是多个因素的叠加，不具备唯一变量。</li>
</ol></div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/RyanPoy/blog/commit/7647e3c4adfb74fd2b671dd4ade57673f639a157" title='Last modified by pengyi | July 17, 2025' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="" />
      <span>July 17, 2025</span>
    </a>
  </div>




</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#引子">引子</a></li>
        <li><a href="#聊聊现实">聊聊现实</a></li>
        <li><a href="#对照实验">对照实验</a></li>
        <li><a href="#结论">结论</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












